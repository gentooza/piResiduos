/*
This file is part of PiResiduos.

Copyright 2017-2018, Prointegra SL.
Copyright 2019-2020, Pixelada S. Coop. And. <info (at) pixelada (dot) org>
Copyright 2023,2024 Joaquín Cuéllar <joa (dot) cuellar (at) riseup (dot) net>

PiResiduos is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

PiResiduos is distributed in the hope that it will 
be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with PiResiduos.  
If not, see <https://www.gnu.org/licenses/>.
*/
/*! Sqlite database creation script*/

DROP TABLE IF EXISTS CENTROS;
CREATE TABLE IF NOT EXISTS CENTROS (
CODIGO_CENTRO INT PRIMARY KEY, 
TIPO_CENTRO INT,
NOMBRE TEXT, 
NIF TEXT, 
DIRECCION TEXT, 
PROVINCIA TEXT, 
POBLACION TEXT, 
CP INT, 
COMUNIDAD_AUTONOMA TEXT,
NIMA TEXT, 
NUM_INSCRIPCION TEXT,
TELEFONO TEXT, 
MAIL TEXT, 
BORRADO INT);

/*TABLE CLIENTES, COSTUMERS REGISTERED IN SYSTEM*/
DROP TABLE IF EXISTS CLIENTES;
CREATE TABLE IF NOT EXISTS CLIENTES (
CODIGO_CLIENTE INT PRIMARY KEY, 
NOMBRE TEXT, 
NIF TEXT, 
DIRECCION TEXT, 
PROVINCIA TEXT,
POBLACION TEXT,
CP INT, 
CODIGO_ENTIDAD_FACTURACION INT,
CBC INT,
TIPO INT, 
COMUNIDAD_AUTONOMA TEXT, 
NIMA TEXT, 
NUM_INSCRIPCION TEXT, 
TELEFONO TEXT, 
MAIL TEXT, 
TRANSPORTISTA_DEFECTO INT,
BORRADO INT);
/*END TABLE CLIENTES*/

/*TABLE ENTIDADES_FACTURACION, EVERY FACTURACION ENTITY LINKED TO A COSTUMER REGISTERED IN SYSTEM*/
DROP TABLE IF EXISTS ENTIDADES_FACTURACION;
CREATE TABLE IF NOT EXISTS ENTIDADES_FACTURACION (
CODIGO INT PRIMARY KEY,
NOMBRE TEXT,
NIF TEXT,
DIRECCION TEXT,
CP INT,
POBLACION TEXT,
PROVINCIA TEXT,
COMUNIDAD_AUTONOMA TEXT,
NIMA INT,
NUM_INSCRIPCION INT,
FP INT,
IBAN TEXT,
ENVIO_FACT TEXT,
TELEFONO INT,
MAIL TEXT);
/*END TABLE ENTIDADES_FACTURACION*/

/*TABLE CLIENTES PRODUCTOS, RELATIONSHIP AND PERMITS BETWEEN A COSTUMER AND A PRODUCT*/
DROP TABLE IF EXISTS CLIENTES_PRODUCTOS;
CREATE TABLE CLIENTES_PRODUCTOS (
CODIGO_PRODUCTO INT ,
CODIGO_CLIENTE INT,
CONTRATO_PT DATE,
NPT_PT INT,
CB_PT INT,
CP_PT INT,
DCP_PT INT,
CONTRATO_ET DATE,
NPT_ET INT,
CB_ET INT,
CP_ET INT,
DCP_ET INT,
CONTRATO_D5 DATE,
NPT_D5 INT,
CB_D5 INT,
CP_D5 INT,
DCP_D5 INT,
CONTRATO_SAL DATE,
NPT_SAL INT,
CB_SAL INT,
CP_SAL INT,
DCP_SAL INT,
PRECIO_TRATAMIENTO REAL);
/*END TABLE CLIENTES PRODUCTOS*/

/*TABLE MOVIMIENTOS, WHERE FINISHED TRANSPORTS ARE STORED*/
DROP TABLE IF EXISTS MOVIMIENTOS;
CREATE TABLE MOVIMIENTOS (
CODIGO_MOV INT PRIMARY KEY,
DI TEXT,
FECHA_HORA_INICIO TEXT,
FECHA_HORA_FINAL TEXT,
TIPO_MOVIMIENTO INT,
CODIGO_CLIENTE INT,
CODIGO_PRODUCTO INT,
CODIGO_TRANSPORTISTA INT,
CODIGO_BASCULISTA INT,
PESO_NETO INT,
PESO_TARA INT,
PESO_BRUTO INT,
PRECIO REAL,
VEHICULO TEXT,
REMOLQUE TEXT,
CENTRO_ORIGEN INT,
CENTRO_DESTINO INT,
INCIDENCIAS TEXT,
COMENTARIO_OPERADOR TEXT,
CLIENTE_PARTICULAR_NOMBRE TEXT,
CLIENTE_PARTICULAR_NIF TEXT,
CLIENTE_PARTICULAR_DOMICILIO TEXT,
CLIENTE_PARTICULAR_PROVINCIA TEXT,
CLIENTE_PARTICULAR_POBLACION TEXT,
CLIENTE_PARTICULAR_CODIGO_POSTAL TEXT,
CLIENTE_PARTICULAR_COMUNIDAD_AUTONOMA TEXT,
CLIENTE_PARTICULAR_NIMA TEXT,
CLIENTE_PARTICULAR_NUM_INSCRIPCION_REGISTRO INT,
CLIENTE_PARTICULAR_TELEFONO TEXT,
CLIENTE_PARTICULAR_CORREO_ELECTRONICO TEXT,
DESTINO_NOMBRE TEXT,
DESTINO_NIF TEXT,
DESTINO_DOMICILIO TEXT,
DESTINO_PROVINCIA TEXT,
DESTINO_POBLACION TEXT,
DESTINO_CODIGO_POSTAL TEXT,
DESTINO_COMUNIDAD_AUTONOMA TEXT,
DESTINO_NIMA TEXT,
DESTINO_NUM_INSCRIPCION_REGISTRO TEXT,
DESTINO_TELEFONO TEXT,
DESTINO_CORREO_ELECTRONICO TEXT,
TIPO_CLIENTE INT,
TRANSPORTISTA_NOMBRE TEXT,
TRANSPORTISTA_NIF TEXT,
TRANSPORTISTA_DIRECCION TEXT,
TRANSPORTISTA_PROVINCIA TEXT,
TRANSPORTISTA_POBLACION TEXT,
TRANSPORTISTA_CP TEXT,
TRANSPORTISTA_COMUNIDAD_AUTONOMA TEXT,
TRANSPORTISTA_NIMA TEXT,
TRANSPORTISTA_NUM_INSCRIPCION TEXT,
TRANSPORTISTA_TELEFONO TEXT,
TRANSPORTISTA_MAIL TEXT,
SINCRONIZADO INT);
/* end table MOVIMIENTOS*/

/* TABLE ORDENES, WHERE TAKING AWAY MOVEMENTS ORDERS ARE STORED*/
DROP TABLE IF EXISTS ORDENES;
CREATE TABLE "ORDENES" (
CODIGO_ORDEN INT PRIMARY KEY,
ECOEMBES INT,
CODIGO_CLIENTE INT,
CODIGO_PRODUCTO INT,
FECHA_FIRMA TEXT,
FECHA_PROGRAMADA TEXT,
PRECIO_TN REAL,
PESO_A_RETIRAR INT,
CODIGO_DESTINO INT,
OPERACION_TRATAMIENTO TEXT,
REPETIR INT,
TIPO_OPERADOR INT,
CODIGO_INFO_ORIGEN_CENTRO INT,
CODIGO_INFO_ORIGEN_AUTORIZADO INT,
CODIGO_INFO_DESTINO_CENTRO INT,
CODIGO_INFO_DESTINO_AUTORIZADO INT,
INFO_DESTINO_CENTRO_NOMBRE TEXT,
INFO_DESTINO_CENTRO_NIF TEXT,
INFO_DESTINO_CENTRO_DIRECCION TEXT,
INFO_DESTINO_CENTRO_CP TEXT,
INFO_DESTINO_CENTRO_MUNICIPIO TEXT,
INFO_DESTINO_CENTRO_PROVINCIA TEXT,
INFO_DESTINO_CENTRO_COMUNIDAD_AUTONOMA TEXT,
INFO_DESTINO_CENTRO_NIMA TEXT,
INFO_DESTINO_CENTRO_N_INSC_REGISTRO TEXT,
INFO_DESTINO_CENTRO_TELEFONO TEXT,
INFO_DESTINO_CENTRO_EMAIL TEXT,
INFO_DESTINO_AUTORIZADO_NOMBRE TEXT,
INFO_DESTINO_AUTORIZADO_NIF TEXT,
INFO_DESTINO_AUTORIZADO_DIRECCION TEXT,
INFO_DESTINO_AUTORIZADO_CP TEXT,
INFO_DESTINO_AUTORIZADO_MUNICIPIO TEXT,
INFO_DESTINO_AUTORIZADO_PROVINCIA TEXT,
INFO_DESTINO_AUTORIZADO_COMUNIDAD_AUTONOMA TEXT,
INFO_DESTINO_AUTORIZADO_NIMA TEXT,
INFO_DESTINO_AUTORIZADO_N_INSC_REGISTRO TEXT,
INFO_DESTINO_AUTORIZADO_TELEFONO TEXT,
INFO_DESTINO_AUTORIZADO_EMAIL TEXT
);
/* end table ORDENES*/

/*TABLE PRODUCTS, WHICH MATERIALS ARE WE GOING TO MANAGE*/
DROP TABLE IF EXISTS PRODUCTOS;
CREATE TABLE PRODUCTOS (
CODIGO_PRODUCTO INT UNIQUE,
CODIGO_LER INT,
NOMBRE TEXT,
NOMBRE2 TEXT,
NOMBRE3 TEXT,
PERMISO_PT INT,
CONTRATO_PT INT,
NPT_PT INT,
CB_PT INT,
CP_PT INT,
DCP_PT INT,
PERMISO_ET INT,
CONTRATO_ET INT,
NPT_ET INT,
CB_ET INT,
CP_ET INT,
DCP_ET INT,
PERMISO_D5 INT,
CONTRATO_D5 INT,
NPT_D5 INT,
CB_D5 INT,
CP_D5 INT,
DCP_D5 INT,
PERMISO_SAL INT,
CONTRATO_SAL INT,
NPT_SAL INT,
CB_SAL INT,
CP_SAL INT,
DCP_SAL INT,
DESCRIPCION_PELIGRO TEXT,
PRECIO_DEFECTO ,
BORRADO INT);
/*end table products*/

/*TABLE TRANSFERENCIAS, WHICH MOVEMENTS HAVE WE GOT BETWEEN INTERNAL RECYCLING CENTERS*/
DROP TABLE IF EXISTS TRANSFERENCIAS;
CREATE TABLE TRANSFERENCIAS (
DI TEXT,
FECHA_HORA TEXT,
CODIGO_ORIGEN INT,
CODIGO_DESTINO INT,
CODIGO_PRODUCTO INT,
CODIGO_TRANSPORTISTA INT,
MATRICULA TEXT,
REMOLQUE TEXT,
INCIDENCIAS TEXT,
COMENTARIO_OPERADOR TEXT,
OPERACION_TRATAMIENTO TEXT,
SINCRONIZADO INT);
/*end table transferencias*/

/*TABLE TRANSITO, WHICH TRANSPORTS HAVE WE INSIDE OUR RECYCLING CENTER WHEN ARE UNLOADING PRODUCTS*/
DROP TABLE IF EXISTS TRANSITO;
CREATE TABLE IF NOT EXISTS TRANSITO (
DI TEXT,
FECHA_HORA TEXT,
TIPO_MOVIMIENTO INT,
CODIGO_CLIENTE INT,
CODIGO_PRODUCTO INT,
PESO_ENTRADA INT,
PRECIO REAL,
MATRICULA TEXT,
REMOLQUE TEXT,
CODIGO_ORIGEN INT,
INCIDENCIAS TEXT,
COMENTARIO_OPERADOR TEXT,
PESO_SALIDA INT,
CODIGO_ESTACION INT,
SINCRONIZADO INT);
/*end table transito*/

/*TABLE TRANSITO_SALIDAS, WHICH TRANSPORTS HAVE WE INSIDE OUR RECYCLING CENTER WHEN ARE LOADING PRODUCTS*/
DROP TABLE IF EXISTS TRANSITO_SALIDAS;
CREATE TABLE TRANSITO_SALIDAS (
DI TEXT,
FECHA_HORA TEXT,
CODIGO_CLIENTE INT,
CODIGO_PRODUCTO INT,
PESO_ENTRADA INT,
MATRICULA TEXT,
REMOLQUE TEXT,
PESO_A_RETIRAR INT,
PESO_RETIRADO INT,
CODIGO_ESTACION INT,
CODIGO_ORDEN INT,
INCIDENCIAS TEXT,
COMENTARIO_OPERADOR TEXT,
SINCRONIZADO INT);
/*end table transito_salidas*/

/*TABLE TRANSPORTISTAS, DRIVERS*/
DROP TABLE IF EXISTS TRANSPORTISTAS;
CREATE TABLE TRANSPORTISTAS (
CODIGO_TRANSPORTISTA INT UNIQUE,
NOMBRE TEXT,
NIF TEXT,
DIRECCION TEXT,
PROVINCIA TEXT,
POBLACION TEXT,
CP INT,
COMUNIDAD_AUTONOMA TEXT,
NIMA TEXT,
NUM_INSCRIPCION TEXT,
TELEFONO TEXT,
MAIL TEXT,
BORRADO INT);
/*end table TRANSPORTISTAS*/

/*TABLE VEHICULOS, TRUCKS REGISTERED IN DATABASE*/
DROP TABLE IF EXISTS VEHICULOS;
CREATE TABLE VEHICULOS (
CODIGO_VEHICULO INT PRIMARY KEY,
MATRICULA TEXT,
VEHICULO_REMOLQUE INT,
TARA INT,
PMA INT,
CODIGO_CLIENTE1 INT,
CODIGO_CLIENTE2 INT,
CODIGO_CLIENTE3 INT,
CODIGO_CLIENTE4 INT,
CODIGO_CLIENTE5 INT,
CODIGO_CLIENTE6 INT,
CODIGO_CLIENTE7 INT,
CODIGO_CLIENTE8 INT,
CODIGO_CLIENTE9 INT,
CODIGO_CLIENTE10 INT,
CODIGO_CLIENTE11 INT,
CODIGO_CLIENTE12 INT,
CODIGO_CLIENTE13 INT,
CODIGO_CLIENTE14 INT,
CODIGO_CLIENTE15 INT,
CODIGO_CLIENTE16 INT,
CODIGO_CLIENTE17 INT,
CODIGO_CLIENTE18 INT,
CODIGO_CLIENTE19 INT,
CODIGO_CLIENTE20 INT,
CODIGO_CLIENTE21 INT,
CODIGO_CLIENTE22 INT,
CODIGO_CLIENTE23 INT,
CODIGO_CLIENTE24 INT,
CODIGO_CLIENTE25 INT,
CODIGO_CLIENTE26 INT,
CODIGO_CLIENTE27 INT,
CODIGO_CLIENTE28 INT,
CODIGO_CLIENTE29 INT,
CODIGO_CLIENTE30 INT,
BORRADO INT);
/*end table VEHICULOS*/

/*TABLE BASCULISTAS, STAFF REGISTERED IN DATABASE*/
DROP TABLE IF EXISTS BASCULISTAS;
CREATE TABLE BASCULISTAS (
CODIGO INT ,
NOMBRE TEXT,
NIF TEXT,
BORRADO INT);
/*end table BASCULISTAS*/

